let uiFunctions=function(){let e=document.querySelector("main"),t=document.createElement("div"),n=document.createElement("h3"),r=document.createElement("div");return t.classList.add("loading"),r.classList.add("spinner"),{showLoadingMessage:function a(){n.innerText="Loading",r.style.backgroundImage="url('img/loading.gif')",t.appendChild(n),t.appendChild(r),e.appendChild(t),t.classList.add("visible")},hideLoadingMessage:function n(){t.classList.remove("visible"),setTimeout(function(){e.removeChild(t)},2e3)}}}(),currencyRepository=function(){let e=[],t=[{name:"USA",rate:.1}];async function n(){uiFunctions.showLoadingMessage();try{let e=await fetch("https://api.vatcomply.com/rates"),t=await e.json();uiFunctions.hideLoadingMessage();let n=t.rates;for(let a in n){let o={name:a,rate:n[a]};r(o)}}catch(c){console.error(c)}}function r(n){var r,a;let o;"object"==typeof n&&(r=n,a=t[0],o=Object.keys(r),Object.keys(a).every(e=>o.includes(e)))&&e.push(n)}let a=document.querySelector("#currencies");function o(){return e}async function c(e){uiFunctions.showLoadingMessage();try{let t=await fetch("https://restcountries.com/v3.1/currency/"+e),n=await t.json();uiFunctions.hideLoadingMessage();let r=[];for(i=0;i<n.length;i++)r.push(n[i].name.common);return{currencyCountries:r,currencyTitle:n[0].currencies[e].name,currencySymbol:n[0].currencies[e].symbol}}catch(a){console.error(a)}}return $("#bootstrapModal").on("show.bs.modal",function(e){c(e.relatedTarget.innerText).then(function(e){modalFunctions.showModal("These are the countries that use the "+e.currencyTitle+" (notation: "+e.currencySymbol+") as their currency:",e.currencyCountries)})}),{add:r,addListItem:function e(t){document.createElement("button");let n=document.createElement("button");n.innerText=t.name,n.className="currency_button list-group-item list-group-item-action col-4",n.setAttribute("data-toggle","modal"),n.setAttribute("data-target","#bootstrapModal"),a.appendChild(n)},getAll:o,loadList:n,searchList:function t(n){let r=document.getElementById("searchResultList"),a=e.filter(function(e){return e.rate<1}),o="";a.forEach(function(e){o=o+"<li>"+e.name+" - rate: "+e.rate+"</li>"}),r.innerHTML=o,n.style.display="none"}}}(),allCurrencies=currencyRepository.getAll();currencyRepository.loadList().then(function(){allCurrencies.forEach(function(e){currencyRepository.addListItem(e)})});let searchbutton=document.getElementById("searchbutton");searchbutton.addEventListener("click",function(){currencyRepository.searchList(searchbutton)});let modalFunctions={showModal:function e(t,n){document.getElementById("currencyName").innerText=t;let r=document.getElementById("currencyData"),a=document.createElement("ul");for(i=0;i<n.length;i++){let o=document.createElement("li");o.innerText=n[i],a.appendChild(o)}r.appendChild(a)}};